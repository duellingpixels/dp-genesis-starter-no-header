"use strict";var autoprefixer=require("autoprefixer"),browserSync=require("browser-sync"),mqpacker=require("css-mqpacker"),gulp=require("gulp"),beautify=require("gulp-cssbeautify"),cache=require("gulp-cached"),cssnano=require("gulp-cssnano"),filter=require("gulp-filter"),imagemin=require("gulp-imagemin"),notify=require("gulp-notify"),pixrem=require("gulp-pixrem"),plumber=require("gulp-plumber"),postcss=require("gulp-postcss"),rename=require("gulp-rename"),sass=require("gulp-sass"),sort=require("gulp-sort"),sourcemaps=require("gulp-sourcemaps"),uglify=require("gulp-uglify"),wpPot=require("gulp-wp-pot"),zip=require("gulp-zip"),js_src=["assets/scripts/*.js","!assets/scripts/*.min.js"],js_dest="assets/scripts/min",sass_src="assets/styles/*.scss",sass_dest="./",img_src=["assets/images/*","!assets/images/*.svg"],img_dest="assets/images",php_src=["./*.php","./**/*.php","./**/**/*.php"],php_dest="./",dev_url="genesis-starter.dev",reload=browserSync.reload;const AUTOPREFIXER_BROWSERS=["last 2 version","> 1%","ie >= 9","ie_mob >= 10","ff >= 30","chrome >= 34","safari >= 7","opera >= 23","ios >= 7","android >= 4","bb >= 10"];gulp.task("sass",function(){gulp.src(sass_src).pipe(plumber({errorHandler:notify.onError("Error: <%= error.message %>")})).pipe(sourcemaps.init()).pipe(sass({outputStyle:"expanded"})).pipe(pixrem()).pipe(postcss([autoprefixer({browsers:AUTOPREFIXER_BROWSERS}),mqpacker({sort:!0})])).pipe(cssnano({safe:!0})).pipe(sourcemaps.write(sass_dest)).pipe(gulp.dest(sass_dest)).pipe(filter("**/*.css")).pipe(reload({stream:!0})).pipe(notify("Compiled: <%= file.relative %>"))}),gulp.task("scripts",function(){gulp.src(js_src).pipe(plumber({errorHandler:notify.onError("Error: <%= error.message %>")})).pipe(cache("scripts")).pipe(rename({suffix:".min"})).pipe(uglify()).pipe(gulp.dest(js_dest)).pipe(reload({stream:!0})).pipe(notify("Minified: <%= file.relative %>"))}),gulp.task("images",function(){return gulp.src(img_src).pipe(plumber({errorHandler:notify.onError("Error: <%= error.message %>")})).pipe(cache("images")).pipe(imagemin({progressive:!0})).pipe(gulp.dest(img_dest)).pipe(reload({stream:!0})).pipe(notify("Optimised: <%= file.relative %>"))}),gulp.task("i18n",function(){return gulp.src(php_src).pipe(plumber({errorHandler:notify.onError("Error: <%= error.message %>")})).pipe(sort()).pipe(wpPot({domain:"genesis-starter",destFile:"genesis-starter.pot",package:"genesis-starter",bugReport:"http://genesis-starter.com",lastTranslator:"Lee Anthony <seothemeswp@gmail.com>",team:"Seo Themes <seothemeswp@gmail.com>"})).pipe(gulp.dest("languages/"))}),gulp.task("watch",function(){browserSync({proxy:dev_url,notify:!1,open:!1}),gulp.watch([sass_src,"assets/styles/**/*.scss"],["sass"]),gulp.watch(js_src,["scripts"]),gulp.watch(img_src,["images"]),gulp.watch(php_src).on("change",reload)}),gulp.task("zip",function(){gulp.src("*.css").pipe(beautify()).pipe(gulp.dest("./")),gulp.src(["./**/*","!./node_modules/","!./node_modules/**"]).pipe(zip(__dirname.split("/").pop()+".zip")).pipe(gulp.dest("../"))}),gulp.task("default",["watch"],function(){gulp.start("sass","scripts","images")});